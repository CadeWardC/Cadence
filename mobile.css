/* ==========================================================================
   Mobile-Friendly Stylesheet
   - All styles are wrapped in a media query for screens 768px and narrower.
   ========================================================================== */

@media (max-width: 768px) {

    /* ======================================================================
       1. Global Resets & Mobile Enhancements
       ====================================================================== */

    * {
        -webkit-tap-highlight-color: transparent; /* Remove tap highlight on iOS/Android */
    }

    .menu-btn, .tab-btn, .range-btn, button, .stat-item, .task {
        -webkit-touch-callout: none; /* Disable callout sheet on long press */
        -webkit-user-select: none;   /* Disable text selection */
        user-select: none;
    }

    input, textarea, select {
        font-size: 16px !important; /* A font-size of 16px+ prevents iOS auto-zoom */
    }

    .container {
        padding: 15px;
    }

    h1 { font-size: 2em; }
    h2 { font-size: 1.5em; }

    /* ======================================================================
       2. Page-Specific Layouts
       ====================================================================== */

    /* --- Home Page --- */
    .home-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    /* --- Analytics Page --- */
    .analytics-controls {
        flex-wrap: wrap;
        row-gap: 10px;
    }
    .chart-area {
        overflow-x: auto;
        justify-content: flex-start;
        padding-bottom: 10px;
    }
    .chart-bar-wrapper {
        flex: 0 0 35px;
    }

    /* --- Calendar Page --- */
    .calendar-container {
        flex-direction: column;
    }
    .calendar-grid {
        flex-grow: 0;
        margin-bottom: 15px;
    }
    .calendar-tasks {
        flex-grow: 1;
        max-height: none;
    }

    /* --- Recurring Tasks Page (NEW Split-Screen Layout) --- */
    #recurring-tasks-container {
        display: flex;
        flex-direction: column;
        height: calc(100vh - 100px); /* Full height minus header/padding */
    }
    .tabs {
        position: relative;
        margin-bottom: 10px;
        flex-shrink: 0;
    }
    .split-view-wrapper {
        display: flex;
        flex-direction: row;
        gap: 10px;
        flex-grow: 1;
        overflow: hidden;
    }
    #task-source-panels {
        flex: 0 0 120px;
        overflow-y: auto;
        padding-right: 5px;
    }
    #weekdays-container {
        flex: 1;
        overflow-y: auto;
        padding-right: 5px;
    }
    #my-tasks-panel,
    #suggested-tasks-panel {
        display: none;
        padding: 0;
        background-color: transparent;
    }
    #my-tasks-panel.active,
    #suggested-tasks-panel.active {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    #my-tasks-list,
    #suggested-tasks-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    #my-tasks-list .task,
    #suggested-tasks-list .task {
        font-size: 0.9em;
        padding: 10px 8px;
        white-space: normal;
        cursor: grab;
    }
    .weekday-column {
        margin-bottom: 10px;
    }
    #template-trash {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        right: 0;
    }

    /* --- Settings Page --- */
    .settings-section {
        flex-direction: column;
        gap: 15px;
    }
    .settings-section label,
    .settings-section .styled-select,
    .settings-section button,
    .settings-section input {
        width: 100%;
        box-sizing: border-box;
    }
    .appearance-setting {
        flex-direction: column;
        gap: 10px;
    }

    /* --- Sustained Projects Page --- */
    .projects-container {
        grid-template-columns: 1fr;
        gap: 15px;
    }
}